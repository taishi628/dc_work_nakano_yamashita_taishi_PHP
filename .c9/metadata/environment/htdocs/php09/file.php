{"changed":true,"filter":false,"title":"file.php","tooltip":"/htdocs/php09/file.php","value":"<?php\n \n$filename = './file_write.txt';\n$comment = '';\n \nif ($_SERVER['REQUEST_METHOD'] === 'POST'){\n \n    if (isset($_POST['comment']) === TRUE) {\n        $comment = $_POST['comment'];\n    }\n \n    if (($fp = fopen($filename, 'a')) !== FALSE) {\n        if (fwrite($fp, $comment) === FALSE) {\n            print 'ファイル書き込み失敗:  ' . $filename;\n        }\n        fclose($fp);\n    }\n}\n \n$data = [];\n \nif (is_readable($filename) === TRUE) {\n    if (($fp = fopen($filename, 'r')) !== FALSE) {\n        while (($tmp = fgets($fp)) !== FALSE) {\n            $data[] = htmlspecialchars($tmp, ENT_QUOTES, 'UTF-8');\n        }\n        fclose($fp);\n    }\n} else {\n    $data[] = 'ファイルがありません';\n}\n \n?>\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>ファイル操作</title>\n</head>\n<body>\n    <h1>ファイル操作</h1>\n \n    <form method=\"post\">\n        <input type=\"text\" name=\"comment\">\n        <input type=\"submit\" name=\"submit\" value=\"送信\">\n    </form>\n \n    <p>以下に<?php print $filename; ?>の中身を表示</p>\n<?php foreach ($data as $read) { ?>\n\n    <p><?php print $read; ?></p>\n<?php } ?>\n</body>\n</html>","undoManager":{"mark":0,"position":1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":52,"column":7},"action":"insert","lines":["<?php"," ","$filename = './file_write.txt';","$comment = '';"," ","if ($_SERVER['REQUEST_METHOD'] === 'POST'){"," ","    if (isset($_POST['comment']) === TRUE) {","        $comment = $_POST['comment'];","    }"," ","    if (($fp = fopen($filename, 'a')) !== FALSE) {","        if (fwrite($fp, $comment) === FALSE) {","            print 'ファイル書き込み失敗:  ' . $filename;","        }","        fclose($fp);","    }","}"," ","$data = [];"," ","if (is_readable($filename) === TRUE) {","    if (($fp = fopen($filename, 'r')) !== FALSE) {","        while (($tmp = fgets($fp)) !== FALSE) {","            $data[] = htmlspecialchars($tmp, ENT_QUOTES, 'UTF-8');","        }","        fclose($fp);","    }","} else {","    $data[] = 'ファイルがありません';","}"," ","?>","<!DOCTYPE html>","<html lang=\"ja\">","<head>","    <meta charset=\"UTF-8\">","    <title>ファイル操作</title>","</head>","<body>","    <h1>ファイル操作</h1>"," ","    <form method=\"post\">","        <input type=\"text\" name=\"comment\">","        <input type=\"submit\" name=\"submit\" value=\"送信\">","    </form>"," ","    <p>以下に<?php print $filename; ?>の中身を表示</p>","<?php foreach ($data as $read) { ?>","    <p><?php print $read; ?></p>","<?php } ?>","</body>","</html>"],"id":2}],[{"start":{"row":48,"column":35},"end":{"row":49,"column":0},"action":"insert","lines":["",""],"id":3}]]},"ace":{"folds":[],"scrolltop":633,"scrollleft":0,"selection":{"start":{"row":49,"column":0},"end":{"row":49,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":41,"state":"start","mode":"ace/mode/php"}},"timestamp":1609728595692}